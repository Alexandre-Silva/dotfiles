#!/bin/zsh

# exit on error
set -e

if [ -n "$ZSH" ] && [ -d "${ZSH}" ]; then
    echo "Oh-my-zsh already installed."
    . "$ZSH/tools/upgrade.sh"

elif [ ! -e $HOME/.oh-my-zsh ]; then
    echo "Cloning oh-my-zsh."
    git clone git://github.com/robbyrussell/oh-my-zsh.git "$HOME/.oh-my-zsh"
    ZSH="$HOME/.oh-my-zsh"

    echo "Creating symlinks"

    for theme in $HOME/dotfiles/shell/oh-my-zsh-custom/themes/*; do
        ln --symbolic --verbose --force "$theme" "$ZSH/custom/plugins/"
    done

    for custom_plugin in $(ls $HOME/dotfiles/shell/oh-my-zsh-custom/plugins/); do
        ln --symbolic --verbose --force "$HOME/dotfiles/shell/oh-my-zsh-custom/plugins/$custom_plugin"  --target-directory="$ZSH/custom/plugins/"
    done

    echo "Oh-my-zsh is ready to use."

else
    echo "$HOME/.oh-my-zsh already exists skipping install of oh-my-zsh"

fi
